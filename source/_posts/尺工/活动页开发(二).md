---
title: 活动页开发(二)
categories:
  - 尺工
 
date: 2017-07-10 10:03:17
---
<p></p>
<!-- more -->
## 前言 
老是想不起来做这个总结。。。

## emmmmm
1. 文字换行
服务器返回的 json 转换后回车和空格会发生变化，放在 textarea 中没有问题，但是放在 div 中的话回车和换行就会不显示。这个时候就得加上一行 css 样式来解决这个问题
```
  white-space: pre-wrap;
```
以下来自 mdn
white-space CSS 属性是用来设置如何处理元素中的空白。
值

1. normal
连续的空白符会被合并，换行符会被当作空白符来处理。填充line盒子时，必要的话会换行。
2. nowrap
和 normal 一样，连续的空白符会被合并。但文本内的换行无效。
3. pre
连续的空白符会被保留。在遇到换行符或者'br'元素时才会换行。 
4. pre-wrap
连续的空白符会被保留。在遇到换行符或者'br'元素，或者需要为了填充line盒子时才会换行。
5. pre-line
连续的空白符会被合并。在遇到换行符或者'br'元素，或者需要为了填充line盒子时会换行。
下面的表格总结了各种 white-sapce 值的行为：

表现 		  换行符	  空格和制表符   文字转行
normal		合并		合并			转行
nowrap		合并		合并			不转行
pre			保留		保留			不转行
pre-wrap	保留		保留			转行
pre-line	保留		合并			转行

然后这里也提一下其他几个属性

字间距，字符间距
```
  word-spacing
  letter-spacing
```
换行
```
  word-break
  word-wrap
```
上面的是所有都换行
下面则是显示整个单词，例如一个单词过长，会把它单独提到下一行
word-wrap 兼容竟然更好?!

### 文字两行显示
```
	overflow: hidden;
	text-overflow: ellipsis;
	display: -webkit-box;
	-webkit-box-orient: vertical;
	-webkit-line-clamp: 2;
```
### 锚点
锚点的使用一般有两种方法，
div 的 id 或者 a 标签的 name，长的就像。。。#top 和 dom 的 id 一样的
a 标签可点击跳转 `<a href="" name="#22">33</a>`
这样在页面后加 #id 后可以直接定位到指定 dom
但是这种定位一般只限于第一次打开这个页面，定位之后再进行刷新是无效的。
因为页面有个默认行为是会记录你上次在网页中的滚动位置，比如文章看一半跳到别的网页在回来会继续定位到这个地方。
所以刷新或者前进后退都是不好使的。这时如果还想用的话就得自己去改 `location.hash = "#bottom"`
js 方法有 `dom.scrollToView(bool)` 来定位到指定元素


### location
location 一个对象，也可当一个字符串进行操作 `location = url`
location.search  查询参数
location.hash  hash
用的多的就这 2 个，可以通过它传数据然后页面解析

### 7牛图片
7牛图片开启样式图片瘦身后对大图片的压缩效果很好。
访问 png-center



## 方法
### 取 url 参数
```
function GetQueryString(name) {
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
	var r = window.location.search.substr(1).match(reg);
	if (r != null) return unescape(r[2]);
	return null;
}
```
### 取 cookie
```
get_access_token(cookie) {
	for (let a = document.cookie.split(';'), i = 0; i < a.length; i++) {
		if (a[i].match(/cookie/i)) {
			this.cookie = a[i].split('=')[1];
			return;
		}
	}
},
```
### 平滑定位
```
go_somewhere(rate) {
	var speed = document.body.clientHeight / rate,
		interval = setInterval(() => {
			var old = document.body.scrollTop;
			document.body.scrollTop += speed;
			if (document.body.scrollTop <= old)
				clearInterval(interval);
		}, 16)
},
```
以前的方法,easeOut 可以换成别的函数
```
function easeOut(t, b, c, d) {
	return -c * (t /= d) * (t - 2) + b;
}
var timer = setInterval(function() {
	//linear滑动定位
	if (flag <= t) {
		ele.scrollTop = easeOut(flag, currentST, 0 - currentST, t)
		flag++;
	} else {
		clearInterval(timer);
	}
}, 16);
```