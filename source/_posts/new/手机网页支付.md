---
title: 手机网页支付
categories:
  - 尺工
date: 2017-09-26 17:55:41
---
<p></p>
<!-- more -->
```
if (res.body.result) {
	let extras = res.body.extras;
	//qq
	if (extras.appId) {
		mqq.tenpay.pay({
			tokenId: extras.tokenId,
			pubAcc: extras.pubAcc,
			pubAccHint: extras.pubAccHint,
			appInfo: "appid#" + extras.appId + "|bargainor_id#" + extras.bargainorId + "|channel#wallet"
		}, function(result, resultCode) {
			if (!resultCode) {
				location.href = 'http://test.mrpyq.com/order/trade_return?tradeid=' + res.body.trade._id;
			} else {
				me.set_error('支付失败');
			}
		})
	} else {
		var url = res.body.extras.url;
		//weixin
		if (me.select_pay_info.pay_way == 'wechat_component_wap') {

			url += '&redirect_url=http://test.mrpyq.com/order/trade_return?tradeid=' + res.body.trade._id;
		}
		////1111
		var node = document.createElement("iframe");
		//									node.style.display = "none";
		node.src = url
		document.body.appendChild(node);
		setTimeout(() => {
			me.set_error('未安装微信客户端')
			document.body.removeChild(node)
		}, 112500)
		/////11111
		//ali
		//								else {
		//
		//									location.href = url;
		//								}
	}
}
```