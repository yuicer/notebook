---
title: 网易2017总结页面
categories:
  - 尺工
date: 2018-01-02 23:18:22
---
<p></p>
<!-- more -->

## 前言
今天看到空间里都在发这个就也去体验了一下，发现这个页面做的真的很棒，于是就爬了下，记录一些新发现

[网页链接](http://music.163.com/nact/year2017_29?uid=532A6E379B3834F6A508AFE156BFF50D)

因为之前也做过类似的，所以真的很佩服把这个做到这么好，下面分几个方面去看

### 数据
这个没得说，网易云音乐的大数据做的真的好，这个从推荐喜好音乐就能看出来

### 数据加载
这个页面做的也是一屏一屏的展示，它的数据加载就做的相当好，首先首屏加载了后面所有需要的数据存了起来。并且在首屏就请求了1屏和2屏的图片资源，然后切换到2屏的时候就豪无卡顿的感觉，而且到二屏之后加载三屏的数据，且基本所有的图片都做的是cdn，这样使图片的加载速度更快。

### 动画
这个页面的设计本来就很棒，偏日式的扁平风，然后再配上小清新音乐就给人一个很舒服轻松的感觉，动画也没有用到复杂的 canvas，而是用了 svg 和对大图片的定位来做动画。

#### 图片定位
比如这一张游泳的图片，看到这个就瞬间想到了`background-position`。之前也用到同样的方法去模仿简单的视频，但是没有想到把它当简单的gif来使用。

<img src="//s3.music.126.net/nact/s/client/images/year2017/p05/man_repeat.png?d8aa052%E2%80%A6">

<iframe src="/demo/demo_180102/index_man.html" frameborder="no" marginwidth="0" marginheight="0" width="100" height="150" border="1">
1

#### svg

svg这个是用了svg的动画
```js
<animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 0 0" to="360 90 90" dur="8s" repeatCount="indefinite"></animateTransform>
<animateMotion begin="-1s" dur="4s" rotate="auto" repeatCount="indefinite">
    <mpath xlink:href="#a"></mpath>
</animateMotion>
<path d="M674.09-33.84C342.94 353.33 88.03 549.27-90.66 553.98" id="a"></path>
``` 
对一些很复杂的动画用一般都是用 gif 或者是 canvas 来做，但是 gif 缺点是比较大而且模糊，canvas 则是复杂切消耗大。用 svg 的话以前觉得是兼容不好，但是看到网易都这么搞了看来也没什么了。

<iframe src="/demo/demo_180102/index_sakura.html" frameborder="no" marginwidth="0" marginheight="0" height="300" scrolling="no">
1

#### 其他动画
其他就是一些鼻尖简单的，图层叠加，打时间差，利用 transition animation 来做动画

### 布局 css
没用采用 rem 或者是 flex 布局，而是最近比较流行的简明分，px 百分比布局，之前也一直觉得这么做很好，以后就这么做吧,按照最小 320 * 568 做吧
避免选中，用了 `-webkit-tap-highlight-color: none` `-webkit-user-select: none`

### 框架
爬了下代码，发现用的 react.production.min.js 还有一个库 https://github.com/ded/reqwest 看起来像是 ajax 库。
其他留着慢慢研究，这个页面是个好东西啊

