---
title: web调试
categories:
  - 尺工
date: 2018-06-24 11:24:07
---
<p></p>
<!-- more -->

## 前言
有时候做开发移动端页面找bug很头疼，所以记录几个抓包的办法

### safari
对于有 mac 和 iphone 测试机的可以直接用 usb 进行连接之后两端同时打开 safiri 浏览器，在 mac 的 safiri 上有一个开发选项，点击之后就可以直接进行调试

---跟新---
这里一般的方法是只能看到手机上 safiri 中打开的网页，对于 app 内的 webview 页面是抓不到的，如果想要抓到就必须得找客户端同学协助一下，将手机的 uuid 加到配置中重新 build 一个包

### 安卓
对于安卓方法都有说使用 chrom://inspect 但是实际去试了试发现并不能走通，一种情况是只显示了 remote 列表，并不显示页面，另一种虽然显示了页面但是点击打开是空白。第一种没有找到原因，第二种查了之后发现需要设置网络？但是虽然连了 vpn 依然无效。。。

### charles
一个很强大的抓包工具，之前有看过一次，不过那时被复杂的操作吓跑了，表示学不会。。。
然鹅再次被安利了之后又去看了看。。。。发现是真的强，直接能抓包 http/https 请求

1. 首先得下载 charles 

2. 下载之后 点击 help 下面的 ssl proxying，点击 install charles root certificate 给自己的电脑安装证书，并用钥匙串添加始终信任

3. 打开手机的 wifi，此时需要和电脑在同一wifi下，然后点击添加代理，选择手动之后，输入自己的 ip地址【ipconfig/ifconfig ev0】 ，然后端口输入 8080【charles 默认的是这个】，确认之后手机再访问任何网页都会连接不上，然后在 charles 上都会有显示。但是都是 unknow，这时需要给手机页安装证书

4. 给手机安装证书，根据不同手机安装会很麻烦，iPhone 手机在设置代理后，访问 chls.pro/ssl 就可以下载，如果没有成功下载，确认下代理设置对不对。下完之后安装，然后在 设置–>通用–>关于本机–>证书信任设置 对证书进行信任就可以了。小米手机的话不能用自带的浏览器下，需要用三方浏览器，下载完成后通过 wifi 高级 安装证书

妈妈再用不用担心找不到 bug 啦
麻烦的是对于每个手机都得安装证书，而且对于有些非接口的问题还是不太好找